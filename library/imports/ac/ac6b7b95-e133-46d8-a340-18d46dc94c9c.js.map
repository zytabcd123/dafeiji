{"version":3,"sources":["../../../../assets/Script/assets/Script/EnemyGroup.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,+BAA0B;AAE1B,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;AAE7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAwC,8BAAY;IADpD;QAAA,qEAoCC;QAjCwB,cAAQ,GAAc,IAAI,CAAA;QAC3B,eAAS,GAAW,CAAC,CAAA,CAAA,mBAAmB;QAC5C,QAAE,GAAS,IAAI,CAAA;;IA+BnC,CAAC;IA7BG,2BAAM,GAAN;QACI,IAAI,YAAY,GAAG;YACf,IAAI,CAAC,WAAW,EAAE,CAAA;QACtB,CAAC,CAAA;QACD,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAChD,CAAC;IAED,gCAAW,GAAX;QAEI,IAAI,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QACtC,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAA;QACrB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;QACnC,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAA;QACjC,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,CAAA;QACjB,2EAA2E;QAE3E,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAA;QACrC,IAAI,CAAC,EAAE,CAAC,UAAU,IAAI,CAAC,CAAA;QACvB,kCAAkC;IACtC,CAAC;IAED,qCAAgB,GAAhB,UAAiB,KAAc;QAC3B,IAAI,EAAE,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA;QACxB,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,GAAG,EAAE,CAAA;QAC1C,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,GAAG,EAAE,CAAA;QAC3C,sBAAsB;QACtB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,IAAI,CAAA;QACpD,OAAO,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;IAChD,CAAC;IAhCoB;QAApB,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;gDAA2B;IAC3B;QAAnB,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;iDAAsB;IACzB;QAAf,QAAQ,CAAC,cAAI,CAAC;0CAAgB;IAJd,UAAU;QAD9B,OAAO;OACa,UAAU,CAmC9B;IAAD,iBAAC;CAnCD,AAmCC,CAnCuC,EAAE,CAAC,SAAS,GAmCnD;kBAnCoB,UAAU","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import Enemy from \"./Enemy\";\nimport Game from \"./Game\";\n\n// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class EnemyGroup extends cc.Component {\n\n    @property(cc.Prefab) preEnemy: cc.Prefab = null\n    @property(cc.Float) enemyRate: number = 1//敌机生成频率，默认间隔1秒生成1个\n    @property(Game) gm: Game = null\n\n    onLoad () {\n        var timeCallback = function () {\n            this.createEnemy()\n        }\n        this.schedule(timeCallback, this.enemyRate);\n    }\n\n    createEnemy() {\n\n        var en = cc.instantiate(this.preEnemy)\n        en.parent = this.node\n        this.node.parent.insertChild(en, 0)\n        let p = this.getEnemyPosition(en)\n        en.setPosition(p)\n        // cc.log('敌机初始位置：', p.x, p.y, this.gm.name, en.getComponent('Enemy').name)\n\n        en.getComponent('Enemy').gm = this.gm\n        this.gm.totalEnemy += 1\n        // this.node.emit('evn_score_add')\n    }\n\n    getEnemyPosition(enemy: cc.Node): cc.Vec2 {\n        let ew = enemy.width / 2\n        let maxw = this.node.parent.width / 2 - ew\n        let minw = -this.node.parent.width / 2 + ew\n        //ew...(sw - ew)范围的随机数\n        let randx = Math.random() * (maxw - 2 * minw) + minw\n        return cc.v2(randx, this.node.parent.height)\n    }\n}\n"]}