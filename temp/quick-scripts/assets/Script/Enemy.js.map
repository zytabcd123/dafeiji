{"version":3,"sources":["Enemy.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import EnemyGroup from \"./EnemyGroup\";\nimport Game from \"./Game\";\n\n// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Enemy extends cc.Component {\n\n    @property(cc.Integer) xMinSpeed: number = 100\n    @property(cc.Integer) xMaxSpeed: number = 500\n    @property(cc.Integer) yMinSpeed: number = 100\n    @property(cc.Integer) yMaxSpeed: number = 500\n    @property(cc.Integer) HP: number = 100\n\n    @property(cc.AudioClip) diedAudio: cc.Texture2D = null\n    xSpeed: number = 0\n    ySpeed: number = 0\n    isDeid: boolean = false\n    gm: Game;\n\n    onLoad() {\n        cc.director.getCollisionManager().enabled = true;\n        this.xSpeed = Math.random() * (this.xMaxSpeed - this.xMinSpeed) + this.xMinSpeed\n        this.ySpeed = Math.random() * (this.yMaxSpeed - this.yMinSpeed) + this.yMinSpeed\n        \n        // cc.log('~~~~~~~~~~~~~', this.gm.name)\n        \n    }\n    \n    onCollisionEnter (other: cc.Collider, self: cc.Collider) {\n        if (this.isDeid) {return}\n        if (other.node.group != '子弹') {return}\n        if (self.node.position.y > this.node.parent.height / 2) {\n            return\n        }\n        // cc.log('敌机被消灭', self.node.position.x, self.node.position.y, this.gm.name)\n        this.gm.updateScore()\n        this.isDeid = true\n        this.enemyDeidEffect()\n    }\n\n    enemyDeidEffect () {\n        var a = this.getComponent(cc.Animation)\n        a.playAdditive('enemy1ani')\n        a.on('finished', this.enemyDeidEffectFinished, this)\n\n        cc.audioEngine.playEffect(this.diedAudio, false)\n    }\n    \n    enemyDeidEffectFinished() {\n        this.node.removeFromParent()\n        this.destroy()\n    }\n    //dt = 0.016\n    update(dt) {\n        if (this.isDeid) {return}\n        // this.node.x += dt * this.xSpeed\n        this.node.y -= dt * this.ySpeed\n        // cc.log(dt, dt * this.ySpeed, this.node.y, this.node.parent.height)\n\n        if (this.node.y < -this.node.parent.height) {\n\n            this.destroy()\n        }\n    }\n}\n"]}